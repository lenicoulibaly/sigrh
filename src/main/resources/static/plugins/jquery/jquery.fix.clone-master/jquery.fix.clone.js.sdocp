sdocp('jquery.fix.clone.js.sdoc', 'Textarea and select clone() bug workaround | Spencer Tipping\nLicensed under the terms of the MIT source code license\n\nMotivation.\njQuery\'s clone() method works in most cases, but it fails to copy the value of textareas and select elements. This patch replaces jQuery\'s clone() method with a wrapper that fills in the\nvalues after the fact.\n\nAn interesting error case submitted by Piotr Przyby≈Ç: If two <select> options had the same value, the clone() method would select the wrong one in the cloned box. The fix, suggested by Piotr\nand implemented here, is to use the selectedIndex property on the <select> box itself rather than relying on jQuery\'s value-based val().\n\n(function (original) {\n  jQuery.fn.clone = function () {\n    var result           = original.apply(this, arguments),\n        my_textareas     = this.find(\'textarea\').add(this.filter(\'textarea\')),\n        result_textareas = result.find(\'textarea\').add(result.filter(\'textarea\')),\n        my_selects       = this.find(\'select\').add(this.filter(\'select\')),\n        result_selects   = result.find(\'select\').add(result.filter(\'select\'));\n\n    for (var i = 0, l = my_textareas.length; i < l; ++i) $(result_textareas[i]).val($(my_textareas[i]).val());\n    for (var i = 0, l = my_selects.length;   i < l; ++i) result_selects[i].selectedIndex = my_selects[i].selectedIndex;\n\n    return result;\n  };\n}) (jQuery.fn.clone);\n');